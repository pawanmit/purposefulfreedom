(function(f){var z=100;var r=5000;var m=800;var y=800;var x=600;var w=400;var n=250;var b=50;var i=50;var A="top";var l="bottom";var G=0;var H=1;var o="update_content_btns";var C="update_content_info";var j="update_index";var g="update_thumb_btns";var v="update_thumb_info";var q="adjust_thumbs";var B="start_timer";var p="reset_timer";var D="pause_timer";var e=0;var h={"vert.tl":e++,"vert.tr":e++,"vert.bl":e++,"vert.br":e++,"fade.left":e++,"fade.right":e++,"alt.left":e++,"alt.right":e++,"blinds.left":e++,"blinds.right":e++,"vert.random.fade":e++,"horz.tl":e++,"horz.tr":e++,"horz.bl":e++,"horz.br":e++,"fade.top":e++,"fade.bottom":e++,"alt.top":e++,"alt.bottom":e++,"blinds.top":e++,"blinds.bottom":e++,"horz.random.fade":e++,random:e++,fade:e++,"h.slide":e++,"v.slide":e++,none:e++};function c(I){this._$stripes;this._arr;this._total;this._intervalId=null;this._gallery=I;this._areaWidth=I._screenWidth;this._areaHeight=I._screenHeight;this._size=I._vertSize;this._delay=I._vertDelay;this._total=Math.ceil(this._areaWidth/this._size);if(this._total>n){this._size=Math.ceil(this._areaWidth/n);this._total=Math.ceil(this._areaWidth/this._size)}var K="";for(var J=0;J<this._total;J++){K+="<div class='vpiece' id='"+J+"' style='left:"+(J*this._size)+"px; height:"+this._areaHeight+"px'></div>"}this._gallery.addToScreen(K);this._$stripes=this._gallery._$obj.find("div.vpiece");this._arr=this._$stripes.toArray()}c.prototype.clear=function(){clearInterval(this._intervalId);this._$stripes.stop(true).css({"z-index":2,opacity:0})};c.prototype.displayContent=function(I,J){this.setPieces(I,J);if(J==h["vert.random.fade"]){this.animateRandom(I)}else{this.animate(I,J)}};c.prototype.setPieces=function(I,J){switch(J){case h["vert.tl"]:case h["vert.tr"]:this.setVertPieces(I,-this._areaHeight,1,this._size,false);break;case h["vert.bl"]:case h["vert.br"]:this.setVertPieces(I,this._areaHeight,1,this._size,false);break;case h["alt.left"]:case h["alt.right"]:this.setVertPieces(I,0,1,this._size,true);break;case h["blinds.left"]:case h["blinds.right"]:this.setVertPieces(I,0,1,0,false);break;default:this.setVertPieces(I,0,0,this._size,false)}};c.prototype.setVertPieces=function(I,O,P,K,N){var R=I.attr("src");var Q=0;var J=0;if(this._gallery._autoCenter){Q=(this._areaHeight-I.height())/2;J=(this._areaWidth-I.width())/2}for(var L=0;L<this._total;L++){var M=((-L*this._size)+J);if(N){O=(L%2)==0?-this._areaHeight:this._areaHeight}this._$stripes.eq(L).css({background:" url('"+R+"') "+M+"px "+Q+"px no-repeat",backgroundPositionX:M+"px",backgroundPositionY:Q+"px",opacity:P,top:O,width:K,"z-index":3})}};c.prototype.animate=function(K,L){var M=this;var O,J,N,I;switch(L){case h["vert.tl"]:case h["vert.bl"]:case h["fade.left"]:case h["blinds.left"]:case h["alt.left"]:O=0;J=this._total-1;N=1;break;default:O=this._total-1;J=0;N=-1}this._intervalId=setInterval(function(){M._$stripes.eq(O).animate({top:0,opacity:1,width:M._size},M._gallery._duration,M._gallery._easing,function(){if(f(this).attr("id")==J){M._gallery.showContent(K)}});if(O==J){clearInterval(M._intervalId)}O+=N},this._delay)};c.prototype.animateRandom=function(J){var L=this;s(this._arr);var I=0;var K=0;this._intervalId=setInterval(function(){f(L._arr[I++]).animate({opacity:1},L._gallery._duration,L._gallery._easing,function(){if(++K==L._total){L._gallery.showContent(J)}});if(I==L._total){clearInterval(L._intervalId)}},this._delay)};function u(I){this._$stripes;this._arr;this._total;this._intervalId=null;this._gallery=I;this._areaWidth=I._screenWidth;this._areaHeight=I._screenHeight;this._size=I._horzSize;this._delay=I._horzDelay;this._total=Math.ceil(this._areaHeight/this._size);if(this._total>n){this._size=Math.ceil(this._areaHeight/n);this._total=Math.ceil(this._areaHeight/this._size)}var K="";for(var J=0;J<this._total;J++){K+="<div class='hpiece' id='"+J+"' style='top:"+(J*this._size)+"px; width:"+this._areaWidth+"px'><!-- --></div>"}this._gallery.addToScreen(K);this._$stripes=this._gallery._$obj.find("div.hpiece");this._arr=this._$stripes.toArray()}u.prototype.clear=function(){clearInterval(this._intervalId);this._$stripes.stop(true).css({"z-index":2,opacity:0})};u.prototype.displayContent=function(I,J){this.setPieces(I,J);if(J==h["horz.random.fade"]){this.animateRandom(I)}else{this.animate(I,J)}};u.prototype.setPieces=function(I,J){switch(J){case h["horz.tr"]:case h["horz.br"]:this.setHorzPieces(I,this._areaWidth,1,this._size,false);break;case h["horz.tl"]:case h["horz.bl"]:this.setHorzPieces(I,-this._areaWidth,1,this._size,false);break;case h["alt.top"]:case h["alt.bottom"]:this.setHorzPieces(I,0,1,this._size,true);break;case h["blinds.top"]:case h["blinds.bottom"]:this.setHorzPieces(I,0,1,0,false);break;default:this.setHorzPieces(I,0,0,this._size,false)}};u.prototype.setHorzPieces=function(I,L,O,Q,N){var R=I.attr("src");var P=0;var J=0;if(this._gallery._autoCenter){P=(this._areaHeight-I.height())/2;J=(this._areaWidth-I.width())/2}for(var M=0;M<this._total;M++){var K=((-M*this._size)+P);if(N){L=(M%2)==0?-this._areaWidth:this._areaWidth}this._$stripes.eq(M).css({background:" url('"+R+"') "+J+"px "+K+"px no-repeat",backgroundPositionX:J+"px",backgroundPositionY:K+"px",opacity:O,left:L,height:Q,"z-index":3})}};u.prototype.animate=function(J,K){var L=this;var N,I,M;switch(K){case h["horz.tl"]:case h["horz.tr"]:case h["fade.top"]:case h["blinds.top"]:case h["alt.top"]:N=0;I=this._total-1;M=1;break;default:N=this._total-1;I=0;M=-1}this._intervalId=setInterval(function(){L._$stripes.eq(N).animate({left:0,opacity:1,height:L._size},L._gallery._duration,L._gallery._easing,function(){if(f(this).attr("id")==I){L._gallery.showContent(J)}});if(N==I){clearInterval(L._intervalId)}N+=M},this._delay)};u.prototype.animateRandom=function(J){var L=this;s(this._arr);var I=0;var K=0;this._intervalId=setInterval(function(){f(L._arr[I++]).animate({opacity:1},L._gallery._duration,L._gallery._easing,function(){if(++K==L._total){L._gallery.showContent(J)}});if(I==L._total){clearInterval(L._intervalId)}},this._delay)};function t(J,I){this._numDisplay=d(I.num_display,5);this._screenWidth=d(I.screen_width,720);this._screenHeight=d(I.screen_height,360);this._thumbWidth=d(I.thumb_width,125);this._thumbHeight=d(I.thumb_height,70);this._contImgNav=I.cont_imgnav;this._contThumbNav=I.cont_thumbnav;this._displayImgBtns=I.display_imgnav;this._displayPlayBtn=I.display_play;this._displayImgNum=I.display_imgnum;this._displayTimer=I.display_timer;this._displayThumbBtns=I.display_thumbnav;this._displayThumbInfo=I.display_thumbnum;this._displayArrow=I.display_arrow;this._displayTooltip=I.display_tooltip;this._displayIndex=I.display_indexes;this._mouseoverPause=window.Touch?false:I.mouseover_pause;this._mouseoverText=window.Touch?false:I.mouseover_text;this._mouseoverInfo=window.Touch?false:I.mouseover_info;this._mouseoverButtons=window.Touch?false:I.mouseover_buttons;this._mouseoverCaption=window.Touch?false:I.mouseover_caption;this._textAlign=I.text_align.toLowerCase();this._captionAlign=I.caption_align.toLowerCase();this._globalEffect=I.transition.toLowerCase();this._globalDelay=d(I.delay,r);this._duration=d(I.transition_speed,y);this._scrollSpeed=d(I.scroll_speed,x);this._moveBy1=I.move_one;this._shuffle=I.shuffle;this._easing=I.easing;this._autoCenter=I.auto_center;this._playOnce=I.rotate_once;this._padding=F(I.padding,0);this._thumbMargin=F(I.thumb_margin,0);this._autoStart=I.auto_rotate;this._vertSize=d(I.vert_size,b);this._horzSize=d(I.horz_size,b);this._vertDelay=d(I.vstripe_delay,z);this._horzDelay=d(I.hstripe_delay,z);this._mousewheelScroll=I.mousewheel_scroll;this._thumbsAlign=I.thumbnails_align.toLowerCase();this._numItems;this._unitSize;this._prevSlots;this._nextSlots;this._maxSlots;this._currIndex;this._prevIndex;this._pos;this._vStripes;this._hStripes;this._rotate;this._delay;this._textOffset;this._selectStyle;this._timerId;this._dir;this._hStripeEffect;this._vStripeEffect;this._slideCoord;this._thumbCoord;this._useFilter;this._$gallery;this._$screen;this._$preloader;this._$mainLink;this._$strip;this._$playBtn;this._$prevBtn;this._$nextBtn;this._$textBox;this._$infoPanel;this._$thumbPanel;this._$thumbList;this._$thumbs;this._$thumbBoxes;this._$cpanel;this._$listBackButton;this._$listFwdButton;this._$thumbInfo;this._$tooltip;this._$indexes;this._$timer;this._$innerText;this._$sPanel;this._$innerInfo;this._$obj=J;this.init()}t.prototype.init=function(){this._$gallery=this._$obj.find(".wt-gallery");this._$screen=this._$gallery.find(">.main-screen");this._$thumbPanel=this._$gallery.find(".thumbnails");this._$thumbList=this._$thumbPanel.find(">ul");this._$thumbs=this._$thumbList.find(">li");this._numItems=this._$thumbs.size();if(this._shuffle){this.shuffleItems()}this._$thumbBoxes=this._$thumbs.find(">div:first");this._timerId=null;this._currIndex=0;this._prevIndex=-1;this._pos=0;this._useFilter=(jQuery.browser.msie&&parseInt(jQuery.browser.version)>6&&parseInt(jQuery.browser.version)<9);if(this._numItems<=this._numDisplay){this._displayThumbBtns=this._displayIndex=false;this._numDisplay=this._numItems}if(this._displayIndex){this._moveBy1=false}this._hStripeEffect=this._vStripeEffect=false;this.checkEffect(h[this._globalEffect]);this.initScreen();this.initCPanel();this.initItems();var I=this._$screen.outerWidth()>this._$cpanel.outerWidth()?this._$screen.outerWidth():this._$cpanel.outerWidth();var J=this._$screen.outerHeight()+this._$cpanel.outerHeight();this._$gallery.css({width:I,height:J,padding:this._padding});f(document).bind("keyup",{elem:this},this.onKeyPress);this._rotate=false;if(this._autoStart){this._rotate=true;this._$gallery.bind(B,{elem:this},this.startTimer).bind(D,{elem:this},this.pauseTimer).bind(p,{elem:this},this.resetTimer);if(this._mouseoverPause){this._$gallery.bind("mouseenter",{elem:this},this.galleryOver).bind("mouseleave",{elem:this},this.galleryOut)}}else{if(this._displayPlayBtn){this._$gallery.bind(B,{elem:this},this.startTimer).bind(D,{elem:this},this.pauseTimer).bind(p,{elem:this},this.resetTimer)}}if(this._vStripeEffect){this._vStripes=new c(this)}if(this._hStripeEffect){this._hStripes=new u(this)}if(window.Touch){this._slideCoord={start:-1,end:-1};this._thumbCoord={start:-1,end:-1};if(this._globalEffect=="v.slide"){this._$screen.bind("touchstart",{elem:this},this.touchVStart).bind("touchmove",{elem:this},this.touchVMove)}else{this._$screen.bind("touchstart",{elem:this},this.touchStart).bind("touchmove",{elem:this},this.touchMove)}this._$screen.bind("touchend",{elem:this},this.touchEnd);this._$thumbPanel.bind("touchstart",{elem:this},this.thumbsTouchStart).bind("touchmove",{elem:this},this.thumbsTouchMove).bind("touchend",{elem:this},this.thumbsTouchEnd)}else{if(this._mousewheelScroll){this._$screen.bind("mousewheel",{elem:this},this.scrollContent).bind("DOMMouseScroll",{elem:this},this.scrollContent);this._$thumbPanel.bind("mousewheel",{elem:this},this.scrollThumbs).bind("DOMMouseScroll",{elem:this},this.scrollThumbs)}}if(!a(6)){this.loadImg(0)}this.loadContent(this._currIndex);this.updateCPanel()};t.prototype.scrollContent=function(J){var I=J.data.elem;if(!I._$strip.is(":animated")){var K=(typeof J.originalEvent.wheelDelta=="undefined")?-J.originalEvent.detail:J.originalEvent.wheelDelta;K>0?I.prevImg():I.nextImg()}return false};t.prototype.scrollThumbs=function(J){var I=J.data.elem;if(!I._$thumbList.is(":animated")){var K=(typeof J.originalEvent.wheelDelta=="undefined")?-J.originalEvent.detail:J.originalEvent.wheelDelta;K>0?I.prevThumbs():I.nextThumbs()}return false};t.prototype.touchStart=function(I){I.data.elem._slideCoord.start=I.originalEvent.touches[0].pageX};t.prototype.touchMove=function(I){I.preventDefault();I.data.elem._slideCoord.end=I.originalEvent.touches[0].pageX};t.prototype.touchVStart=function(I){I.data.elem._slideCoord.start=I.originalEvent.touches[0].pageY};t.prototype.touchVMove=function(I){I.preventDefault();I.data.elem._slideCoord.end=I.originalEvent.touches[0].pageY};t.prototype.touchEnd=function(J){var I=J.data.elem;if(I._slideCoord.end>=0){if(Math.abs(I._slideCoord.start-I._slideCoord.end)>i){if(I._slideCoord.end<I._slideCoord.start){I.nextImg()}else{I.prevImg()}}}I._slideCoord.start=I._slideCoord.end=-1};t.prototype.thumbsTouchStart=function(J){var I=J.data.elem;I._thumbCoord.start=J.originalEvent.touches[0].pageX};t.prototype.thumbsTouchMove=function(I){I.preventDefault();I.data.elem._thumbCoord.end=I.originalEvent.touches[0].pageX};t.prototype.thumbsTouchEnd=function(J){var I=J.data.elem;if(I._thumbCoord.end>=0){if(Math.abs(I._thumbCoord.start-I._thumbCoord.end)>i){if(I._thumbCoord.end<I._thumbCoord.start){I.nextThumbs()}else{I.prevThumbs()}}}I._thumbCoord.start=I._thumbCoord.end=-1};t.prototype.addToScreen=function(I){this._$mainLink.append(I)};t.prototype.initScreen=function(){var I="<div class='prev-btn'></div>						<div class='play-btn'></div>						<div class='next-btn'></div>						<div class='desc'></div>						<div class='info'>							<div class='s-panel'>								<div class='s-prev'></div>								<div class='s-info'></div>								<div class='s-play'></div>								<div class='s-next'></div>							</div>							<div class='inner-info'></div>							<div class='timer'></div>						</div>						<div class='preloader'></div>";this._$screen.append(I);this._$textBox=this._$screen.find(">.desc");this._$preloader=this._$screen.find(">.preloader");this._$infoPanel=this._$screen.find(">.info");this._$sPanel=this._$infoPanel.find(">.s-panel");this._$screen.css({width:this._screenWidth,height:this._screenHeight});this._textOffset=(a(6)&&this._screenHeight%2!=0)?-1:0;this._$strip=f("<div class='strip'></div>");if(this._globalEffect=="h.slide"){this._$screen.append(this._$strip);this._$strip.css({width:2*this._screenWidth,height:this._screenHeight});this._$thumbs.removeAttr("effect")}else{if(this._globalEffect=="v.slide"){this._$screen.append(this._$strip);this._$strip.css({width:this._screenWidth,height:2*this._screenHeight});this._$thumbs.removeAttr("effect")}else{this._$screen.append("<a href='#'></a>");this._$mainLink=this._$screen.find(">a:first")}}this.initTextBox();if(this._mouseoverButtons){this.initMouseoverButtons()}else{this.initSmallButtons()}this.initInfoPanel();if(this._useFilter){this._$textBox.addClass("ie-rgba");this._$infoPanel.addClass("ie-rgba")}};t.prototype.initSmallButtons=function(){this._$screen.find(">.prev-btn, >.next-btn, >.play-btn").hide();this._$prevBtn=this._$sPanel.find(">.s-prev");this._$nextBtn=this._$sPanel.find(">.s-next");this._$playBtn=this._$sPanel.find(">.s-play");if(this._displayPlayBtn){this._$playBtn.toggleClass("pause",this._autoStart).mousedown(k).bind("click",{elem:this},this.togglePlay)}else{this._$playBtn.hide()}if(this._displayImgBtns){this._$prevBtn.mousedown(k).bind("click",{elem:this},this.prevImg);this._$nextBtn.mousedown(k).bind("click",{elem:this},this.nextImg);if(!this._contImgNav){this._$gallery.bind(o,{elem:this},this.updateImgBtns)}}else{this._$prevBtn.hide();this._$nextBtn.hide()}};t.prototype.initMouseoverButtons=function(){this._$sPanel.find(">.s-prev, >.s-next, >.s-play").hide();this._$prevBtn=this._$screen.find(">.prev-btn");this._$nextBtn=this._$screen.find(">.next-btn");this._$playBtn=this._$screen.find(">.play-btn");if(this._displayPlayBtn){this._$playBtn.toggleClass("pause",this._autoStart).bind("click",{elem:this},this.togglePlay);var K=this;this._$screen.hover(function(){K._$playBtn.stop(true,true).fadeIn(w)},function(){K._$playBtn.stop(true,true).fadeOut(w)})}else{this._$playBtn.hide()}if(this._displayImgBtns){var I=0;var J=this._screenWidth-this._$nextBtn.width();this._$prevBtn.data({offset:-this._$prevBtn.width(),pos:I}).css({left:this._$prevBtn.data("offset"),visibility:"visible"}).mousedown(k).bind("click",{elem:this},this.prevImg);this._$nextBtn.data({offset:this._screenWidth,pos:J}).css({left:this._$nextBtn.data("offset"),visibility:"visible"}).mousedown(k).bind("click",{elem:this},this.nextImg);this._$screen.bind("mouseenter",{elem:this},this.displayDButtons).bind("mouseleave",{elem:this},this.hideDButtons);if(!this._contImgNav){this._$gallery.bind(o,{elem:this},this.updateImgBtns)}}else{this._$prevBtn.hide();this._$nextBtn.hide()}};t.prototype.displayDButtons=function(J){var I=J.data.elem;I._$prevBtn.stop().animate({left:I._$prevBtn.data("pos")},w);I._$nextBtn.stop().animate({left:I._$nextBtn.data("pos")},w)};t.prototype.hideDButtons=function(J){var I=J.data.elem;I._$prevBtn.stop().animate({left:I._$prevBtn.data("offset")},w);I._$nextBtn.stop().animate({left:I._$nextBtn.data("offset")},w)};t.prototype.updateImgBtns=function(J){var I=J.data.elem;I._$prevBtn.toggleClass("off",I._currIndex==0);I._$nextBtn.toggleClass("off",I._currIndex==I._numItems-1)};t.prototype.initTextBox=function(){var J,I;if(this._textAlign==l){J=l;I=this._textOffset}else{J=A;I=0}this._$textBox.data("align",J).append("<div class='inner-text'></div>");this._$innerText=this._$textBox.find("div.inner-text");if(this._mouseoverText){this._$textBox.css(J,-this._$textBox.height()+I);this._$screen.data("hover",false).bind("mouseenter",{elem:this},this.displayText).bind("mouseleave",{elem:this},this.hideText)}else{this._$textBox.css(J,I)}};t.prototype.updateText=function(){var K=this._$thumbs.eq(this._currIndex).find("div.data>div:first").html();var I=this._$thumbs.eq(this._currIndex).data("textHeight");if(this._mouseoverText&&!this._$screen.data("hover")){this._$textBox.stop(true).css(this._$textBox.data("align"),-I).height(I);this._$innerText.html(K)}else{this._$innerText.html("");var J=this;this._$textBox.stop(true).animate({height:I},w,function(){J._$innerText.css("opacity",0).html(K).animate({opacity:1},w)})}};t.prototype.displayText=function(J){var I=J.data.elem;I._$screen.data("hover",true);I._$textBox.stop(true,true).animate(I._$textBox.data("align")==A?{top:0}:{bottom:I._textOffset},w)};t.prototype.hideText=function(J){var I=J.data.elem;I._$screen.data("hover",false);I._$textBox.stop(true,true).animate(I._$textBox.data("align")==A?{top:-I._$textBox.height()}:{bottom:-I._$textBox.height()+I._textOffset},w)};t.prototype.initInfoPanel=function(){this._$timer=this._$infoPanel.find(">.timer").data("pct",1);if(!this._displayImgNum&&!this._displayTimer&&!(this._displayPlayBtn&&this._displayImgBtns&&!this._mouseoverButtons)){this._$infoPanel.hide();return}var M,L;if(this._$textBox.data("align")==A){M=l;L=this._textOffset}else{M=A;L=0}this._$infoPanel.data("align",M).css("visibility","visible");if(this._mouseoverInfo){this._$infoPanel.css(M,-this._$infoPanel.height()+L);this._$screen.bind("mouseenter",{elem:this},this.displayInfo).bind("mouseleave",{elem:this},this.hideInfo)}else{this._$infoPanel.css(M,L)}this._$innerInfo=this._$infoPanel.find(".inner-info");if(this._displayImgNum){this._$gallery.bind(C,{elem:this},this.updateImgInfo)}else{this._$innerInfo.hide()}if(this._displayTimer){this._$timer.css("visibility","visible")}if(this._displayImgNum){if((!this._displayPlayBtn&&!this._mouseoverButtons)||this._mouseoverButtons){this._$innerInfo.hide();this._$innerInfo=this._$sPanel.find(">.s-info");var J=E(this._numItems);var K="";for(var I=0;I<J;I++){K+="0"}this._$innerInfo.html(K+" / "+K).width(this._$innerInfo.width()).html("")}}this._$sPanel.css("marginLeft",-this._$sPanel.width()/2)};t.prototype.displayInfo=function(J){var I=J.data.elem;I._$infoPanel.stop().animate((I._$infoPanel.data("align")==l)?{bottom:I._textOffset}:{top:0},w)};t.prototype.hideInfo=function(J){var I=J.data.elem;I._$infoPanel.stop().animate((I._$infoPanel.data("align")==l)?{bottom:-I._$infoPanel.height()+I._textOffset}:{top:-I._$infoPanel.height()},w)};t.prototype.updateImgInfo=function(J){var I=J.data.elem;I._$innerInfo.html((I._currIndex+1)+" / "+I._numItems)};t.prototype.initItems=function(){var K=this._$thumbs.find(">div:first>p:first");if(this._useFilter){K.addClass("ie-rgba")}if(this._displayTooltip){K.hide();this._$tooltip=f("<div id='gallery-tooltip'></div>").append("<div class='tt-txt'></div>");f("body").append(this._$tooltip);if(this._captionAlign==A){this._$tooltip.data("bottom",false).addClass("txt-up")}else{this._$tooltip.data("bottom",true).addClass("txt-down")}if(a(6)){this._$tooltip.css("background-image","none").find(":only-child").css("margin",0)}}else{var M=K.outerWidth()-K.width();K.width(this._thumbWidth-M)}for(var P=0;P<this._numItems;P++){var S=this._$thumbs.eq(P);var J=S.find(">div:first");var L=J.find(">a:first");var I=L.find("img");var O=J.find(">p:first");var Q=S.find(">div.data>div:first");var R=(Q.length>0&&Q.html()!="")?this._$innerText.html(Q.html()).outerHeight():0;var N=h[S.attr("effect")];if((typeof N=="undefined")||N==h["h.slide"]||N==h["v.slide"]){N=h[this._globalEffect]}else{this.checkEffect(N)}S.data({imgurl:L.attr("href"),caption:O.html(),effect:N,delay:d(S.attr("delay"),this._globalDelay),textHeight:R});I[0].complete||I[0].readyState=="complete"?this.processImg(I):I.bind("load",{elem:this},this.processLoadedImg);if(O.length>0&&O.html()!=""){if(this._displayTooltip){J.bind("mouseenter",{elem:this},this.showTooltip).bind("mouseleave",{elem:this},this.hideTooltip).bind("mousemove",{elem:this},this.moveTooltip)}else{if(this._mouseoverCaption){J.bind("mouseenter",{elem:this},this.displayCaption).bind("mouseleave",{elem:this},this.hideCaption);O.css("top",this._captionAlign==l?this._thumbHeight:-O.outerHeight())}else{O.css("top",this._captionAlign==l?this._thumbHeight-O.outerHeight():0)}}}}this._$innerText.html("");this._$textBox.css("visibility","visible")};t.prototype.selectItem=function(L){var K=L.data.elem;var I=f(L.target).parents("li").eq(0);var J=I.index();if(J>=0&&J!=K._currIndex){K._dir=J<K._currIndex?G:H;K._$gallery.trigger(p);K._prevIndex=K._currIndex;K._currIndex=J;K.loadContent(K._currIndex)}return false};t.prototype.displayCaption=function(J){var I=J.data.elem;var K=f(this).find(">p:first");K.stop().animate({top:(I._captionAlign==l)?I._thumbHeight-K.outerHeight():0},300)};t.prototype.hideCaption=function(J){var I=J.data.elem;var K=f(this).find(">p:first");K.stop().animate({top:(I._captionAlign==l)?I._thumbHeight:-K.outerHeight()},300)};t.prototype.showTooltip=function(K){var J=K.data.elem;var I=f(this).parent().data("caption");var L=J._$tooltip.data("bottom")?0:-J._$tooltip.outerHeight(true);J._$tooltip.find(">div.tt-txt").html(I);J._$tooltip.css({top:K.pageY+L,left:K.pageX}).stop(true,true).delay(m).fadeIn(300)};t.prototype.moveTooltip=function(J){var I=J.data.elem;var K=I._$tooltip.data("bottom")?0:-I._$tooltip.outerHeight(true);I._$tooltip.css({top:J.pageY+K,left:J.pageX})};t.prototype.hideTooltip=function(I){I.data.elem._$tooltip.stop(true,true).fadeOut(0)};t.prototype.initCPanel=function(){var J=this;this._$cpanel=this._$gallery.find(".cpanel");if(this._thumbsAlign==A){this._$gallery.prepend(this._$cpanel);this._$thumbBoxes.css("marginTop",0)}else{this._$thumbBoxes.css("marginBottom",0)}this._$thumbBoxes.css({width:this._thumbWidth,height:this._thumbHeight});this._$thumbs.css({"margin-right":this._thumbMargin});this._unitSize=this._$thumbs.outerWidth(true);this._$thumbPanel.css({width:(this._numDisplay*this._$thumbBoxes.outerWidth())+((this._numDisplay-1)*this._thumbMargin),height:this._$thumbBoxes.outerHeight(true)}).bind("click",{elem:this},this.selectItem).bind("mouseenter",function(){J._$gallery.unbind(q)}).bind("mouseleave",function(){J._$gallery.unbind(q).bind(q,{elem:J},J.moveThumbs)});var I;if(this._displayIndex){I=this._numDisplay*Math.ceil(this._numItems/this._numDisplay)}else{I=this._numItems}this._$thumbList.width(I*this._unitSize);this._maxSlots=I-this._numDisplay;this._prevSlots=0;this._nextSlots=this._maxSlots;this.initThumbButtons();this.initIndexBar();if(!this._displayIndex&&!this._displayThumbBtns){this._moveBy1=true;this._contThumbNav=false;this._$thumbBoxes.bind("click",{elem:this},this.itemMove)}this._selectStyle=this._displayArrow?(this._thumbsAlign==A?"down-arrow":"up-arrow"):"curr";this._$cpanel.css({width:this._$thumbPanel.outerWidth()+this._$listBackButton.outerWidth()+this._$listFwdButton.outerWidth(),height:this._$thumbPanel.outerHeight()+this._$cpanel.find(".cbar").outerHeight()});this._$gallery.bind(q,{elem:this},this.moveThumbs)};t.prototype.initThumbButtons=function(){this._$listBackButton=this._$cpanel.find(".thumbs-back");this._$listFwdButton=this._$cpanel.find(".thumbs-fwd");if(this._displayThumbBtns){var I=this._$thumbBoxes.outerHeight();var J=this._$thumbBoxes.css("margin-top");this._$listBackButton.css({height:I,marginTop:J}).mousedown(k).bind("click",{elem:this},this.prevThumbs);this._$listFwdButton.css({height:I,marginTop:J}).mousedown(k).bind("click",{elem:this},this.nextThumbs);if(!this._contThumbNav){this._$gallery.bind(g,{elem:this},this.updateThumbBtns)}}else{this._$listBackButton.remove();this._$listFwdButton.remove()}};t.prototype.initIndexBar=function(){if(this._displayIndex||this._displayThumbInfo){var N="<div class='cbar'><div class='thumb-info'></div></div>";if(this._thumbsAlign==A){this._$cpanel.prepend(N)}else{this._$cpanel.append(N)}}else{return}var M=this._$cpanel.find(".cbar").css({width:this._$thumbPanel.outerWidth(),"margin-left":this._$listBackButton.outerWidth(),"margin-right":this._$listFwdButton.outerWidth()});if(this._displayThumbInfo){this._$thumbInfo=this._$cpanel.find(".thumb-info");this._$gallery.bind(v,{elem:this},this.updateThumbInfo);if(!this._displayIndex){this._$thumbInfo.css("width","100%")}}else{this._$cpanel.find(".thumb-info").hide()}if(this._displayIndex){var P=Math.ceil(this._numItems/this._numDisplay);var O="<div class='index-panel'>";for(var L=0;L<P;L++){var J=L*this._numDisplay;var I=Math.min(J+this._numDisplay,this._numItems);O+="<div class='index' title='"+((J+1)+"-"+I)+"'></div>"}O+="</div>";if(this._thumbsAlign==A){M.prepend(O)}else{M.append(O)}this._$indexes=M.find(".index").mousedown(k).bind("click",{elem:this},this.goToIndex);this._$gallery.bind(j,{elem:this},this.updateIndexes);var K=M.find(".index-panel");K.css({"padding-left":Math.floor((M.width()-K.width())/2)})}};t.prototype.updateCPanel=function(){this._$gallery.trigger(j).trigger(v).trigger(g)};t.prototype.updateIndexes=function(K){var J=K.data.elem;var I=Math.ceil(J._prevSlots/J._numDisplay);J._$indexes.filter(".index-hl").removeClass("index-hl");J._$indexes.eq(I).addClass("index-hl")};t.prototype.updateThumbInfo=function(K){var J=K.data.elem;var L=-(J._pos/J._unitSize);var I=Math.min(L+J._numDisplay,J._numItems);J._$thumbInfo.html((L+1)+" - "+I+" of "+J._numItems)};t.prototype.updateThumbBtns=function(K){var J=K.data.elem;var L=Math.abs(J._pos/J._unitSize);var I=L+J._numDisplay;J._$listBackButton.toggleClass("off",L<=0);J._$listFwdButton.toggleClass("off",I>=J._numItems)};t.prototype.togglePlay=function(J){var I=J.data.elem;I._rotate=!I._rotate;if(I._rotate){f(this).addClass("pause");I._$gallery.trigger(B)}else{f(this).removeClass("pause");I._$gallery.trigger(D)}};t.prototype.prevImg=function(J){var I=(typeof J!="undefined")?J.data.elem:this;if(I._currIndex>0){I._prevIndex=I._currIndex;I._currIndex--}else{if(I._contImgNav){I._prevIndex=I._currIndex;I._currIndex=I._numItems-1}else{return}}I._dir=G;I._$gallery.trigger(p);I.loadContent(I._currIndex);I._$gallery.trigger(q);return false};t.prototype.nextImg=function(J){var I=(typeof J!="undefined")?J.data.elem:this;if(I._currIndex<I._numItems-1){I._prevIndex=I._currIndex;I._currIndex++}else{if(I._contImgNav){I._prevIndex=I._currIndex;I._currIndex=0}else{return}}I._dir=H;I._$gallery.trigger(p);I.loadContent(I._currIndex);I._$gallery.trigger(q);return false};t.prototype.prevThumbs=function(K){var J=(typeof K!="undefined")?K.data.elem:this;if(J._nextSlots<J._maxSlots){var I=J._moveBy1?1:Math.min(J._maxSlots-J._nextSlots,J._numDisplay);J._nextSlots+=I;J._prevSlots-=I}else{if(J._contThumbNav){J._nextSlots=0;J._prevSlots=J._maxSlots}else{return}}J.moveList();return false};t.prototype.nextThumbs=function(K){var J=(typeof K!="undefined")?K.data.elem:this;if(J._prevSlots<J._maxSlots){var I=J._moveBy1?1:Math.min(J._maxSlots-J._prevSlots,J._numDisplay);J._prevSlots+=I;J._nextSlots-=I}else{if(J._contThumbNav){J._prevSlots=0;J._nextSlots=J._maxSlots}else{return}}J.moveList();return false};t.prototype.moveList=function(){this._pos=-this._prevSlots*this._unitSize;this._$thumbList.stop(true,true).animate({left:this._pos},this._scrollSpeed);this.updateCPanel()};t.prototype.itemMove=function(K){var J=K.data.elem;var I=(f(this).parents("li").eq(0).index()-J._prevSlots)%J._numDisplay;if(I+1==J._numDisplay){J.nextThumbs()}else{if(I==0){J.prevThumbs()}}};t.prototype.moveThumbs=function(J){var I=J.data.elem;I._prevSlots=Math.floor(I._currIndex/I._numDisplay)*I._numDisplay;if(!I._displayIndex&&I._prevSlots>I._maxSlots){I._prevSlots=I._maxSlots}I._nextSlots=I._maxSlots-I._prevSlots;I.moveList()};t.prototype.goToIndex=function(J){var I=J.data.elem;I._prevSlots=f(this).index()*I._numDisplay;I._nextSlots=I._maxSlots-I._prevSlots;I.moveList();return false};t.prototype.galleryOver=function(J){var I=J.data.elem;I._rotate=false;I._$playBtn.removeClass("pause");I._$gallery.trigger(D)};t.prototype.galleryOut=function(J){var I=J.data.elem;I._rotate=true;I._$playBtn.addClass("pause");I._$gallery.trigger(B)};t.prototype.pauseLast=function(I){if(I==this._numItems-1){this._rotate=false;this._$playBtn.removeClass("pause");this._$gallery.trigger(D)}};t.prototype.loadContent=function(L){if(this._playOnce){this.pauseLast(L)}var J=this._$thumbs.eq(L);this._$thumbs.filter("."+this._selectStyle).removeClass(this._selectStyle);J.addClass(this._selectStyle);this._delay=J.data("delay");if(this._$mainLink){var N=J.find("div.data>a");var I=N.attr("href");if(I){this._$mainLink.unbind("click",k).css({cursor:"pointer"}).attr({href:I,target:N.attr("target")})}else{this._$mainLink.click(k).css({cursor:"default"})}}this._$gallery.trigger(C).trigger(o);this.updateText();if(J.data("img")){this._$preloader.hide();this.displayContent(J.data("img"))}else{var K=f("<img class='main-img'/>");var M=this;K.load(function(){M._$preloader.hide();M.storeImg(J,f(this));M.displayContent(f(this))}).error(function(){alert("Error loading image")});this._$preloader.show();K.attr("src",J.data("imgurl"))}};t.prototype.displayContent=function(I){if(this._vStripeEffect){this._vStripes.clear()}if(this._hStripeEffect){this._hStripes.clear()}if(this._vStripeEffect||this._hStripeEffect){this.setPrevious()}var J=this._$thumbs.eq(this._currIndex).data("effect");if(J==h.none||(typeof J=="undefined")){this.showContent(I);return}else{if(J==h.fade){this.fadeInContent(I);return}else{if(J==h["h.slide"]){this.slideContent(I,"left",this._screenWidth);return}else{if(J==h["v.slide"]){this.slideContent(I,"top",this._screenHeight);return}}}}if(J==h.random){J=Math.floor(Math.random()*(e-5))}if(J<=h["vert.random.fade"]){this._vStripes.displayContent(I,J)}else{if(J<=h["horz.random.fade"]){this._hStripes.displayContent(I,J)}}};t.prototype.setPrevious=function(){if(this._prevIndex>=0){var J=this._$mainLink.find("img#curr-img").attr("src");var K=this._$thumbs.eq(this._prevIndex).data("imgurl");if(J!=K){this._$mainLink.find("img.main-img").attr("id","").hide();var I=this._$mainLink.find("img.main-img").filter(function(){return f(this).attr("src")==K});I.eq(0).show()}}};t.prototype.showContent=function(I){this._$mainLink.find("img.main-img").attr("id","").hide();I.attr("id","curr-img").show();this._$gallery.trigger(B)};t.prototype.fadeInContent=function(I){this._$mainLink.find("img#curr-img").stop(true,true);this._$mainLink.find("img.main-img").attr("id","").css("z-index",0);var J=this;I.attr("id","curr-img").css("z-index",1).stop(true,true).fadeIn(this._duration,function(){J._$mainLink.find("img.main-img:not('#curr-img')").hide();J._$gallery.trigger(B)})};t.prototype.slideContent=function(N,P,M){this._$strip.stop(true,true);var I=this._$strip.find("#curr-img");if(I.size()>0){this._$strip.find(".main-img").attr("id","").parents(".content-box").css({top:0,left:0});N.attr("id","curr-img").parents(".content-box").show();var K,J;if(this._dir==G){this._$strip.css(P,-M);K=I;J=0}else{K=N;J=-M}K.parents(".content-box").css(P,M);var O=(P=="top")?{top:J}:{left:J};var L=this;this._$strip.stop(true,true).animate(O,this._duration,this._easing,function(){L._$strip.find(".main-img:not('#curr-img')").parents(".content-box").hide();K.parents(".content-box").css({top:0,left:0});L._$strip.css({top:0,left:0});L._$gallery.trigger(B)})}else{this._$strip.css({top:0,left:0});this._$strip.find(".main-img").parents(".content-box").hide().css({top:0,left:0});N.attr("id","curr-img").parents(".content-box").show();this._$gallery.trigger(B)}};t.prototype.processLoadedImg=function(I){I.data.elem.processImg(f(this))};t.prototype.processImg=function(I){var J;if(I.outerWidth()>this._thumbWidth){J=I.outerHeight()/I.outerWidth();I.width(this._thumbWidth);I.height(J*this._thumbWidth)}if(I.outerHeight()>this._thumbHeight){J=I.outerWidth()/I.outerHeight();I.width(J*this._thumbHeight);I.height(this._thumbHeight)}I.css({left:Math.round((this._thumbWidth-I.outerWidth())/2),top:Math.round((this._thumbHeight-I.outerHeight())/2)})};t.prototype.loadImg=function(J){try{var I=this._$thumbs.eq(J);var L=f("<img class='main-img'/>");var M=this;L.load(function(){if(!I.data("img")){M.storeImg(I,f(this))}J++;if(J<M._numItems){M.loadImg(J)}}).error(function(){J++;if(J<M._numItems){M.loadImg(J)}});L.attr("src",I.data("imgurl"))}catch(K){}};t.prototype.storeImg=function(K,L){if(this._globalEffect=="h.slide"||this._globalEffect=="v.slide"){this._$strip.append(L);this.centerImg(L);var I=f("<div class='content-box'></div>").css({width:this._screenWidth,height:this._screenHeight});L.wrap(I);L.css("display","block");var J=K.find("div.data>a");if(J){L.wrap(J)}}else{this._$mainLink.append(L);this.centerImg(L)}K.data("img",L)};t.prototype.centerImg=function(J){if(this._autoCenter&&J.width()>0&&J.height()>0){var K=(this._screenHeight-J.height())/2;var I=(this._screenWidth-J.width())/2;J.css({top:K,left:I})}};t.prototype.shuffleItems=function(){var L=new Array(this._numItems);for(var K=0;K<this._numItems;K++){var I=Math.floor(Math.random()*this._numItems);var J=this._$thumbs.eq(K);L[K]=this._$thumbs.eq(I);L[I]=J}for(var K=0;K<this._numItems;K++){this._$thumbList.append(L[K])}this._$thumbs=this._$thumbList.find(">li")};t.prototype.startTimer=function(K){var J=K.data.elem;if(J._rotate&&J._timerId==null){var I=Math.round(J._$timer.data("pct")*J._delay);J._$timer.animate({width:(J._screenWidth+1)},I,"linear");J._timerId=setTimeout(function(){J._dir=H;J._prevIndex=J._currIndex;J._currIndex=(J._currIndex<J._numItems-1)?J._currIndex+1:0;J._$gallery.trigger(p);J.loadContent(J._currIndex);J._$gallery.trigger(q)},I)}};t.prototype.resetTimer=function(J){var I=J.data.elem;clearTimeout(I._timerId);I._timerId=null;I._$timer.stop(true).width(0).data("pct",1)};t.prototype.pauseTimer=function(K){var I=K.data.elem;clearTimeout(I._timerId);I._timerId=null;var J=1-(I._$timer.width()/(I._screenWidth+1));I._$timer.stop(true).data("pct",J)};t.prototype.checkEffect=function(I){if(I==h.random){this._hStripeEffect=this._vStripeEffect=true}else{if(I<=h["vert.random.fade"]){this._vStripeEffect=true}else{if(I<=h["horz.random.fade"]){this._hStripeEffect=true}}}};t.prototype.onKeyPress=function(J){var I=J.data.elem;switch(J.keyCode){case 37:I.prevImg();break;case 39:I.nextImg();break}};function k(){return false}function a(I){if(jQuery.browser.msie&&parseInt(jQuery.browser.version)<=I){return true}return false}function s(I){var M=I.length;for(var L=0;L<M;L++){var J=Math.floor(Math.random()*M);var K=I[L];I[L]=I[J];I[J]=K}}function d(I,J){if(!isNaN(I)&&I>0){return I}return J}function F(I,J){if(!isNaN(I)&&I>=0){return I}return J}function E(I){var J=1;I=Math.abs(I);I=parseInt(I/10);while(I>0){J++;I=parseInt(I/10)}return J}f.fn.wtGallery=function(K){var J={num_display:5,screen_width:720,screen_height:360,padding:10,thumb_width:125,thumb_height:70,thumb_margin:5,text_align:A,caption_align:l,auto_rotate:true,delay:r,rotate_once:false,auto_center:true,cont_imgnav:true,cont_thumbnav:true,display_play:true,display_imgnav:true,display_imgnum:true,display_thumbnav:true,display_thumbnum:false,display_arrow:true,display_tooltip:false,display_timer:true,display_indexes:true,mouseover_pause:false,mouseover_text:false,mouseover_info:false,mouseover_caption:true,mouseover_buttons:true,transition:"h.slide",transition_speed:y,scroll_speed:x,vert_size:b,horz_size:b,vstripe_delay:z,hstripe_delay:z,move_one:false,shuffle:false,easing:"",mousewheel_scroll:true,thumbnails_align:l};var I=f.extend({},J,K);return this.each(function(){var L=new t(f(this),I)})}})(jQuery);